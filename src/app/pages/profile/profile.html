<div class="p-8 bg-gray-50 min-h-screen">
  <!-- Loading Overlay -->
  <div *ngIf="isLoading" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 backdrop-blur-sm">
    <div class="bg-white p-6 rounded-lg shadow-xl flex items-center gap-3">
      <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-pro"></div>
      <span class="text-gray-700">Updating profile...</span>
    </div>
  </div>

  <h2 class="text-2xl mb-1 text-gray-800">My Profile</h2>
  <p class="text-gray-500 mb-4">View and manage your profile information</p>
  
  <div class="grid grid-cols-1 mx-auto w-full lg:w-1/2 gap-5">
    <!-- Profile Header -->
    <div class="bg-white col-span-1 border border-gray-200 rounded-lg p-6 flex flex-col items-center gap-6">
      <div class="w-20 h-20 flex items-center justify-center bg-pro text-white text-3xl font-bold rounded-full overflow-hidden">
        <img *ngIf="admin?.photo" [src]="admin.photo" alt="Profile Picture" class="w-20 h-20 rounded-full object-cover" />
        <span *ngIf="!admin?.photo" class="text-white">
          {{ admin?.firstName?.charAt(0) }}{{ admin?.lastName?.charAt(0) }}
        </span>
      </div>
      
      <div class="flex-1 text-center">
        <h3 class="text-xl font-semibold text-gray-800">{{ admin?.firstName }} {{ admin?.lastName }}</h3>
        <p class="text-gray-500">{{ admin?.position?.name }}</p>
        <p class="text-sm text-white w-fit px-2 py-1 bg-pro mx-auto rounded mt-1 capitalize">
          {{ admin?.role }}
        </p>
      </div>
      
      <div class="self-start mt-3 border-t border-gray-200 w-full">
        <div class="bg-white py-6">
          <div class="space-y-3 text-sm text-gray-600 flex flex-col gap-4">
            <div class="flex items-center gap-4">
              <i class="fa-regular fa-envelope text-pro text-xl"></i>
              <p class="flex flex-col text-[16px]">
                <span class="text-gray-500 text-md">Email:</span> {{ admin?.email }}
              </p>
            </div>
            <div class="flex items-center gap-4">
              <i class="fa-regular fa-hospital text-pro text-xl"></i>
              <p class="flex flex-col text-[16px]">
                <span class="text-gray-500 text-md">Department:</span> {{ admin?.department?.name }}
              </p>
            </div>
            <div class="flex items-center gap-4">
              <i class="fa-solid fa-suitcase text-pro text-xl"></i>
              <p class="flex flex-col text-[16px]">
                <span class="text-gray-500 text-md">Position:</span> {{ admin?.position?.name }}
              </p>
            </div>
            <div class="flex items-center gap-4">
              <i class="fa-solid fa-shield-heart text-pro text-xl"></i>
              <p class="flex flex-col text-[16px]">
                <span class="text-gray-500 text-md">Access Level:</span> {{ admin?.level?.name }}
              </p>
            </div>
            <div class="flex items-center gap-4">
              <i class="fa-regular fa-user text-pro text-xl"></i>
              <p class="flex flex-col text-[16px]">
                <span class="text-gray-500 text-md">Nickname:</span> {{ admin?.nickname }}
              </p>
            </div>
          </div>
        </div>
      </div>
      
      <button 
        (click)="openEditForm()" 
        class="bg-pro w-full cursor-pointer text-white px-4 py-3 rounded-lg hover:bg-pro-hover transition font-medium"
      >
        Edit Profile
      </button>
    </div>
  </div>

  <!-- Edit Profile Modal -->
  <div
    *ngIf="showEditForm"
    class="fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50"
  >
    <div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-md relative max-h-[90vh] overflow-y-auto">
      <h3 class="text-2xl font-semibold mb-6 text-gray-800">
        Edit Profile
      </h3>

      <div class="grid grid-cols-1 gap-5">
        <!-- First Name -->
        <div class="relative">
          <input 
            [(ngModel)]="tempAdmin.firstName" 
            type="text" 
            id="firstName" 
            placeholder=" "
            class="peer w-full border rounded-lg p-3 border-gray-300 focus:border-pro focus:ring-1 focus:ring-pro outline-none transition"
          />
          <label 
            for="firstName" 
            class="absolute left-3 top-3 text-gray-400 text-sm transition-all duration-300
                   peer-placeholder-shown:top-3 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-sm
                   peer-focus:-top-2 peer-focus:text-pro peer-focus:text-xs peer-focus:font-medium
                   peer-not-placeholder-shown:-top-2 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-pro peer-not-placeholder-shown:font-medium bg-white px-1 cursor-text"
          >
            First Name *
          </label>
        </div>

        <!-- Last Name -->
        <div class="relative">
          <input 
            [(ngModel)]="tempAdmin.lastName" 
            type="text" 
            id="lastName" 
            placeholder=" "
            class="peer w-full border rounded-lg p-3 border-gray-300 focus:border-pro focus:ring-1 focus:ring-pro outline-none transition"
          />
          <label 
            for="lastName" 
            class="absolute left-3 top-3 text-gray-400 text-sm transition-all duration-300
                   peer-placeholder-shown:top-3 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-sm
                   peer-focus:-top-2 peer-focus:text-pro peer-focus:text-xs peer-focus:font-medium
                   peer-not-placeholder-shown:-top-2 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-pro peer-not-placeholder-shown:font-medium bg-white px-1 cursor-text"
          >
            Last Name *
          </label>
        </div>

        <!-- Nick Name -->
        <div class="relative">
          <input 
            [(ngModel)]="tempAdmin.nickname" 
            type="text" 
            id="nickname" 
            placeholder=" "
            class="peer w-full border rounded-lg p-3 border-gray-300 focus:border-pro focus:ring-1 focus:ring-pro outline-none transition"
          />
          <label 
            for="nickname" 
            class="absolute left-3 top-3 text-gray-400 text-sm transition-all duration-300
                   peer-placeholder-shown:top-3 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-sm
                   peer-focus:-top-2 peer-focus:text-pro peer-focus:text-xs peer-focus:font-medium
                   peer-not-placeholder-shown:-top-2 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-pro peer-not-placeholder-shown:font-medium bg-white px-1 cursor-text"
          >
            Nickname
          </label>
        </div>

        <!-- Email -->
        <div class="relative">
          <input 
            [(ngModel)]="tempAdmin.email" 
            type="email" 
            id="email" 
            placeholder=" "
            class="peer w-full border rounded-lg p-3 border-gray-300 focus:border-pro focus:ring-1 focus:ring-pro outline-none transition"
          />
          <label 
            for="email" 
            class="absolute left-3 top-3 text-gray-400 text-sm transition-all duration-300
                   peer-placeholder-shown:top-3 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-sm
                   peer-focus:-top-2 peer-focus:text-pro peer-focus:text-xs peer-focus:font-medium
                   peer-not-placeholder-shown:-top-2 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-pro peer-not-placeholder-shown:font-medium bg-white px-1 cursor-text"
          >
            Email
          </label>
        </div>

        <!-- Role -->
        <div class="relative">
          <select
            [(ngModel)]="tempAdmin.role"
            id="role"
            class="peer w-full border rounded-lg p-3 border-gray-300 focus:border-pro focus:ring-1 focus:ring-pro outline-none transition bg-white appearance-none"
          >
            <option value="" disabled>Select Role</option>
            <option *ngFor="let role of roles" [value]="role" [selected]="tempAdmin.role === role">
              {{ role | titlecase }}
            </option>
          </select>
          <label
            for="role"
            class="absolute left-3 top-3 text-gray-400 text-sm transition-all duration-300
                   peer-focus:-top-2 peer-focus:text-pro peer-focus:text-xs peer-focus:font-medium
                   peer-not-placeholder-shown:-top-2 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-pro peer-not-placeholder-shown:font-medium bg-white px-1 cursor-text"
          >
            Role
          </label>
        </div>

        <!-- Department -->
        <div class="relative">
          <select
            [(ngModel)]="tempAdmin.departmentId"
            id="department"
            class="peer w-full border rounded-lg p-3 border-gray-300 focus:border-pro focus:ring-1 focus:ring-pro outline-none transition bg-white appearance-none"
          >
            <option value="" disabled>Select Department</option>
            <option *ngFor="let dept of departments" [value]="dept._id" [selected]="tempAdmin.departmentId === dept._id">
              {{ dept.name }}
            </option>
          </select>
          <label
            for="department"
            class="absolute left-3 top-3 text-gray-400 text-sm transition-all duration-300
                   peer-focus:-top-2 peer-focus:text-pro peer-focus:text-xs peer-focus:font-medium
                   peer-not-placeholder-shown:-top-2 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-pro peer-not-placeholder-shown:font-medium bg-white px-1 cursor-text"
          >
            Department
          </label>
        </div>

        <!-- Position -->
        <div class="relative">
          <select
            [(ngModel)]="tempAdmin.positionId"
            id="position"
            class="peer w-full border rounded-lg p-3 border-gray-300 focus:border-pro focus:ring-1 focus:ring-pro outline-none transition bg-white appearance-none"
          >
            <option value="" disabled>Select Position</option>
            <option *ngFor="let position of positions" [value]="position._id" [selected]="tempAdmin.positionId === position._id">
              {{ position.name }}
            </option>
          </select>
          <label
            for="position"
            class="absolute left-3 top-3 text-gray-400 text-sm transition-all duration-300
                   peer-focus:-top-2 peer-focus:text-pro peer-focus:text-xs peer-focus:font-medium
                   peer-not-placeholder-shown:-top-2 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-pro peer-not-placeholder-shown:font-medium bg-white px-1 cursor-text"
          >
            Position
          </label>
        </div>

        <!-- Level -->
        <div class="relative">
          <select
            [(ngModel)]="tempAdmin.levelId"
            id="level"
            class="peer w-full border rounded-lg p-3 border-gray-300 focus:border-pro focus:ring-1 focus:ring-pro outline-none transition bg-white appearance-none"
          >
            <option value="" disabled>Select Level</option>
            <option *ngFor="let level of levels" [value]="level._id" [selected]="tempAdmin.levelId === level._id">
              {{ level.name }}
            </option>
          </select>
          <label
            for="level"
            class="absolute left-3 top-3 text-gray-400 text-sm transition-all duration-300
                   peer-focus:-top-2 peer-focus:text-pro peer-focus:text-xs peer-focus:font-medium
                   peer-not-placeholder-shown:-top-2 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-pro peer-not-placeholder-shown:font-medium bg-white px-1 cursor-text"
          >
            Access Level
          </label>
        </div>
      </div>

      <!-- Buttons -->
      <div class="flex justify-end gap-3 mt-6">
        <button 
          (click)="closeForm()"
          [disabled]="isLoading"
          class="px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition font-medium disabled:opacity-50"
        >
          Cancel
        </button>
        <button 
          (click)="saveChanges()"
          [disabled]="isLoading"
          class="px-4 py-2 rounded-lg bg-pro text-white hover:bg-pro-hover transition font-medium disabled:opacity-50 flex items-center gap-2"
        >
          <span>Save Changes</span>
          <div *ngIf="isLoading" class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
        </button>
      </div>
    </div>
  </div>
</div>