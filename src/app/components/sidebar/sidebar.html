<!-- Overlay -->
<div
  class="sidebar-overlay fixed inset-0 bg-black/40 z-40 transition-all duration-300"
  [class.hidden]="!isSidebarOpen || screenWidth >= 1020"
  [class.opacity-0]="!isSidebarOpen"
  [class.opacity-100]="isSidebarOpen"
  (click)="closeSidebar()"
></div>

<!-- السايدبار الرئيسي -->
<nav
  class="sidebar fixed top-0 left-0 h-full bg-white flex flex-col shadow-lg z-50 transform transition-all duration-300 border-r border-gray-200"
  [class.-translate-x-full]="!isSidebarOpen && screenWidth < 1020"
  [class.w-64]="isSidebarOpen || screenWidth < 1020"
>

  <!-- الهيدر -->
  <div class="flex items-center gap-3 p-4 border-b border-gray-200 bg-pro2">
    <div class="bg-pro text-white p-2 rounded-xl text-center">
      <i class="fa-solid fa-hospital"></i>
    </div>
    <div>
      <h2 class="text-pro font-semibold text-lg">HealthCare</h2>
      <p class="text-gray-500 text-sm">Admin Portal</p>
    </div>
  </div>

  <!-- معلومات المستخدم -->
  <div class="flex items-center gap-3 p-4 border-b border-gray-200">
    <div class="w-10 h-10 bg-pro text-white rounded-full flex items-center justify-center font-semibold">
      {{ getUserInitial() }}
    </div>
    <div>
      <h4 class="text-pro font-medium text-sm">{{ getUserName() }}</h4>
      <div class="text-white bg-pro rounded-lg px-2 py-1 w-fit text-xs capitalize">
        {{ getUserRole() }}
      </div>
    </div>
  </div>

  <!-- روابط التنقل -->
  <div class="flex-1 px-2 overflow-y-auto py-4">
    <ul class="space-y-2">
      <li *ngFor="let link of links">
        <a
          [routerLink]="link.path"
          routerLinkActive="bg-pro !text-white"
          [routerLinkActiveOptions]="{ exact: true }"
          (click)="closeOnMobile()"
          class="flex items-center gap-3 p-3 rounded-lg transition-all duration-200 hover:bg-pro2 hover:text-pro"
          [ngClass]="{
            'bg-pro-hover': !isLinkActive(link.path),
            'bg-pro text-white': isLinkActive(link.path)
          }"
        >
          <i [class]="link.icon" class="w-5 text-center"></i>
          <span class="font-medium text-sm">{{ link.label }}</span>
        </a>
      </li>
    </ul>
  </div>

  <!-- زر الخروج -->
  <div class="mt-auto p-4 border-t border-gray-200">
    <button
      (click)="logout()"
      class="flex items-center gap-3 w-full p-3 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200 border border-red-200"
    >
      <i class="fa-solid fa-right-from-bracket"></i>
      <span class="font-medium text-sm">Logout</span>
    </button>
  </div>
</nav>

<!-- زر القائمة للموبايل -->
<button
  *ngIf="screenWidth < 1020"
  (click)="onToggleSidebar()"
  class="mobile-toggle-btn fixed top-4 left-4 z-50 w-10 h-10 bg-pro text-white rounded-lg shadow-lg flex items-center justify-center"
  [class.hidden]="isSidebarOpen"
>
  <i class="fa-solid fa-bars"></i>
</button>